<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Apply — EGR Careers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/css/careers.css?v=2"/>
  <script defer src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script defer src="/js/supabaseClient.js?v=2"></script>
  <script defer src="/js/careers.js?v=2"></script>
</head>
<body>
  <!-- HEADER -->
  <header class="nav">
    <div class="container">
      <div class="brand">EGR Careers</div>
      <nav class="links">
        <a href="/jobs.html">Jobs</a>
        <a href="/dashboard.html">My Applications</a>
        <div class="clock" id="clock">--:--</div>
        <button id="authBtn" class="btn">Sign In</button>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-bg" id="heroBg"></div>
    <div class="container">
      <h1 class="title" id="jobTitle">Apply to Join EGR</h1>
      <p class="subtitle">Complete your application below. Your information is secure and reviewed by our HR team.</p>
    </div>
  </section>

  <!-- MAIN FORM -->
  <main class="container" style="margin-top:20px">
    <form class="card modern-form" id="applyForm">
      <label for="fullName">Full Name</label>
      <input id="fullName" name="fullName" required placeholder="Your full name">

      <label for="email">Email Address</label>
      <input id="email" name="email" type="email" required placeholder="you@example.com">

      <label for="discordId">Discord ID</label>
      <input id="discordId" name="discordId" required placeholder="Username#1234">

      <label for="cover">Cover Letter / Message</label>
      <textarea id="cover" name="cover" placeholder="Brief message…" required></textarea>

      <label for="resume">Resume (PDF)</label>
      <input id="resume" name="resume" type="file" accept="application/pdf" required>

      <label for="jobSelect">Select Position</label>
      <select id="jobSelect" name="jobSelect" required>
        <option value="">-- Choose a Job --</option>
      </select>

      <div class="row" style="margin-top:15px">
        <button class="btn primary" type="submit">Submit Application</button>
        <a class="btn ghost" href="/jobs.html">Cancel</a>
      </div>
    </form>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div>© 2025 EGR — All Rights Reserved</div>
    </div>
  </footer>

  <!-- AUTH MODAL -->
  <dialog id="authModal" class="modal">
    <form method="dialog" class="card" id="loginForm">
      <h3>Sign in / Create account</h3>
      <input type="email" id="authEmail" placeholder="Email address" required>
      <input type="password" id="authPass" placeholder="Password" required>
      <div class="row">
        <button class="btn" type="submit">Sign In</button>
        <button class="btn ghost" id="signupBtn">Create Account</button>
        <button class="btn red" id="closeAuth">Close</button>
      </div>
    </form>
  </dialog>

  <div id="toast"></div>

  <script>
    document.addEventListener('DOMContentLoaded', async ()=>{
      await CAREERS.bootCommon();
      CAREERS.pageApply();
      CAREERS.loadJobOptions(); // dynamically populate jobs from HR database
    });
  </script>
</body>
</html>
