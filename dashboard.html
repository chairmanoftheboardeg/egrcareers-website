<!doctype html>
<html>
<head><meta charset="utf-8"/><title>My Applications</title><meta name="viewport" content="width=device-width,initial-scale=1"/><link href="/css/careers.css" rel="stylesheet"></head>
<body>
<header class="nav"><div class="container nav-container">
  <div class="brand">Emirates Group Roblox</div>
  <nav class="links"><a href="/index.html">Home</a><a href="/jobs.html">Jobs</a><a href="/dashboard.html">My Applications</a><div id="localTime">--:--</div></nav>
</div></header>

<section class="hero-modern"><div class="container"><h1>My Applications</h1><p class="small">Applications you have submitted.</p></div></section>

<main class="container" style="max-width:1000px;margin:1.2rem auto">
  <div id="apps"></div>
</main>

<footer class="footer-modern"><div class="container">© 2025 Emirates Group Roblox</div></footer>

<script>
  function updateLocalTime(){ const now=new Date(); document.getElementById('localTime').textContent = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});}
  setInterval(updateLocalTime,1000); updateLocalTime();

  // For a first simple test we'll read last application from localStorage (set upon successful submission).
  const apps = JSON.parse(localStorage.getItem('egr_apps') || '[]');
  const container = document.getElementById('apps');
  if(!apps.length){
    container.innerHTML = '<div class="card">No applications found. Submit an application from the <a href="/jobs.html">jobs page</a>.</div>';
  } else {
    container.innerHTML = '';
    apps.forEach(a => {
      const el = document.createElement('div'); el.className='card'; el.innerHTML = `
        <h3 style="color:var(--primary-red)">${a.jobTitle}</h3>
        <p class="small"><strong>${a.fullName}</strong> • ${a.submittedAt || '—'}</p>
        <p><strong>Status:</strong> <span>${a.status || 'Pending'}</span></p>
        <p>${a.cover ? a.cover.substr(0,220) + '...' : ''}</p>
      `;
      container.appendChild(el);
    });
  }
</script>
</body>
</html>
