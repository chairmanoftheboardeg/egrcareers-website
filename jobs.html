<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Jobs — EGR Careers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link href="/css/careers.css" rel="stylesheet">
  <script>
    // Set this to your Apps Script URL
    const API_BASE = 'https://script.google.com/macros/s/AKfycby-ea7iqH6PTt2ZmZGtf3JQy3uPbeNM31waoUCIuTE4CHqrs2LunRj4xG4O1TcLL4W8GQ/exec';
  </script>
</head>
<body>
  <header class="nav"><div class="container nav-container">
    <div class="brand">Emirates Group Roblox</div>
    <nav class="links">
      <a href="/index.html">Home</a>
      <a href="/jobs.html">Jobs</a>
      <a href="/dashboard.html">My Applications</a>
      <div id="localTime">--:--</div>
      <button id="authBtn" class="btn btn-primary">HR Sign In</button>
    </nav>
  </div></header>

  <section class="hero-modern"><div class="container">
    <h1>Open Positions</h1>
    <p class="small">Find your next role with Emirates Group Roblox.</p>
  </div></section>

  <main class="container" style="margin:1.5rem auto;max-width:1100px">
    <div id="jobsList"></div>
  </main>

  <footer class="footer-modern"><div class="container footer-container">
    <div>© 2025 Emirates Group Roblox — All Rights Reserved</div>
    <div class="footer-links">
      <a href="/terms.html">Terms</a> · <a href="/privacy.html">Privacy</a> · <a href="/org-terms.html">Org Terms</a>
    </div>
  </div></footer>

<script>
  function updateLocalTime(){ const now=new Date(); document.getElementById('localTime').textContent = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});}
  setInterval(updateLocalTime,1000); updateLocalTime();

  async function loadJobs(){
    const container = document.getElementById('jobsList');
    container.innerHTML = '<div class="card">Loading jobs…</div>';
    try {
      const res = await fetch(API_BASE + '?path=jobs');
      const json = await res.json();
      if(!json.ok){ container.innerHTML = '<div class="card">No jobs available</div>'; return; }
      const jobs = json.jobs && json.jobs.length ? json.jobs : [{
        jobId: 'JOB-EXAMPLE-001',
        title: 'HR Manager',
        division: 'Human Resources',
        department: 'HR Department',
        description: 'Oversee HR operations, manage recruitment, employee relations, and policy implementation.',
        supervisory: 'Yes',
        paid: 'Yes',
        contract: '6 months',
        renewable: 'Yes'
      }];
      container.innerHTML = '';
      jobs.forEach(job => {
        const el = document.createElement('div');
        el.className = 'job-card';
        el.innerHTML = `
          <h3 style="color:var(--primary-red);margin:0">${job.title}</h3>
          <p class="small"><strong>Division:</strong> ${job.division} • <strong>Department:</strong> ${job.department}</p>
          <p>${job.description}</p>
          <p class="small"><strong>Supervisory:</strong> ${job.supervisory} • <strong>Paid:</strong> ${job.paid} • <strong>Contract:</strong> ${job.contract} • <strong>Renewable:</strong> ${job.renewable}</p>
          <div style="margin-top:.75rem">
            <a class="btn btn-primary" href="/apply.html?job=${encodeURIComponent(job.title)}&jobId=${encodeURIComponent(job.jobId||'') }">Apply</a>
            <a class="btn btn-ghost" href="/support/index.html">Support</a>
          </div>
        `;
        container.appendChild(el);
      });
    } catch(err) {
      container.innerHTML = '<div class="card">Could not load jobs — try again later.</div>';
      console.error(err);
    }
  }
  loadJobs();
</script>
</body>
</html>
